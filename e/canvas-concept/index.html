<!doctype html>
<html data-n-head-ssr lang="en" data-n-head="lang">
  <head data-n-head="">
    <title data-n-head="true">nuxt-app</title><meta data-n-head="true" charset="utf-8"><meta data-n-head="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="true" data-hid="description" name="description" content="My perfect Nuxt.js project"><meta data-n-head="true" data-hid="mobile-web-app-capable" name="mobile-web-app-capable" content="yes"><meta data-n-head="true" data-hid="apple-mobile-web-app-title" name="apple-mobile-web-app-title" content="nuxt-app"><meta data-n-head="true" data-hid="author" name="author" content="wangxingzi"><meta data-n-head="true" data-hid="theme-color" name="theme-color" content="#fff"><meta data-n-head="true" data-hid="og:type" name="og:type" property="og:type" content="website"><meta data-n-head="true" data-hid="og:title" name="og:title" property="og:title" content="nuxt-app"><meta data-n-head="true" data-hid="og:site_name" name="og:site_name" property="og:site_name" content="nuxt-app"><meta data-n-head="true" data-hid="og:description" name="og:description" property="og:description" content="My perfect Nuxt.js project"><link data-n-head="true" rel="icon" type="image/x-icon" href="/favicon.ico"><link data-n-head="true" rel="manifest" href="/_nuxt/manifest.060adf34.json"><link data-n-head="true" rel="shortcut icon" href="/_nuxt/icons/icon_64.9mld2VBMsQ$.png"><link data-n-head="true" rel="apple-touch-icon" href="/_nuxt/icons/icon_512.9mld2VBMsQ$.png" sizes="512x512"><link rel="preload" href="/_nuxt/f2a175f0c9b27ce0ea03.js" as="script"><link rel="preload" href="/_nuxt/b9fbefe8b023fdf63743.js" as="script"><link rel="preload" href="/_nuxt/7e5bc1f92898fa1790e7.js" as="script"><link rel="preload" href="/_nuxt/944a63902cd72f03102d.js" as="script"><style data-vue-ssr-id="2cb398ca:0 17cfdfa9:0 aab9a468:0 91eb8e92:0">@charset "UTF-8";body,html{margin:0;height:100%}a,a:link{text-decoration:none}.md{line-height:1.8}.md h1,.md h2,.md h3,.md h4{margin-top:2em}.md a{color:#961723}.md a:hover{color:#999}.md blockquote{position:relative;margin:1em 0;padding:.5em 40px;background:#f2f2f2}.md blockquote:before{content:"";position:absolute;top:0;bottom:0;left:0;width:10px;background:#ddd}.md li>code,.md p>code{background:#f7f7f7;padding:5px;margin:0 5px;border-radius:5px;font-family:PT Mono,Consolas,Monaco,Menlo,-apple-system,BlinkMacSystemFont,微软雅黑,Verdana,Arial,Helvetica,sans-serif;word-break:break-all;color:#ca342e}.md code{font-size:14px}.md img{display:block;max-width:100%;margin:0 auto}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#fff;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}html{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-align:center;color:#333}.article[data-v-dad44538]{max-width:90%;margin:auto}.header[data-v-dad44538]{text-align:center}.header .header-img[data-v-dad44538]{margin-top:22px;width:40px}.title[data-v-dad44538]{font-size:18px;max-width:100%;width:600px;margin:120px auto 0}.title .title-h1[data-v-dad44538]{font-weight:400;margin:0}.title .title-date[data-v-dad44538]{text-align:right;text-align:center;margin:10px 0 0}.body[data-v-dad44538]{max-width:100%;width:650px;margin:auto;padding:120px 0;text-align:left;font-size:18px}.title-date[data-v-dad44538]{font-size:16px}.title-date-logo[data-v-dad44538]{height:16px;margin-right:5px;vertical-align:middle}</style>
  </head>
  <body data-n-head="">
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div><div class="article" data-v-dad44538><header class="header" data-v-dad44538><a href="/" data-v-dad44538><img src="/_nuxt/img/1c65b4e.png" alt class="header-img" data-v-dad44538></a></header> <section class="title" data-v-dad44538><h1 class="title-h1" data-v-dad44538></h1> <p class="title-date" data-v-dad44538><img src="/_nuxt/img/5f2b928.svg" alt class="title-date-logo" data-v-dad44538> <span style="vertical-align:middle" data-v-dad44538></span></p></section> <section class="body md" data-v-dad44538><hr>
<h2>modified_time: 2019-01-13 22:09
title: canvas的一些概念
type: post</h2>
<p>canvas接触了挺久了，发现很多概念还是很模糊，比如路径、状态等等，经常搞混，因此现在总结和梳理一下。</p>
<h2>路径</h2>
<p>了解canvas的都知道，canvas上下文中的moveTo、lineTo、rect等方法可以创建路径，但什么是路径呢？</p>
<p>就我理解，一条路径就是一系列点和这些点按一定顺序相连的一种抽象描述，和ps里的钢笔工具画出来的路径概念是一样的。</p>
<p>canvas 里又有子路径的概念，每条子路径是一个单独的路径，不与其它路径相连接。一个路径中可以含有多个子路径。</p>
<p>moveTo 的作用就是在当前路径下新建一条子路径，将指定的点作为子路径的起点</p>
<p>lineTo 则是新建一个点，将这个点与当前的子路径相连。如果当前没有子路径，则作用与 moveTo 方法相同。</p>
<p>注意，有些绘制路径的方法会主动新建子路径，比如 rect 方法，而有些则会像 lineTo 那样尽可能衔接已有的子路径，比如 arc 方法。</p>
<p>至于 beginPath，这个方法的作用是在当前canvas上下文中创建一个新路径，把已存在的路径清除。路径的清除不会影响到已经使用fill、stroke等方法绘制上去的像素，只是内存中的路径抽象被销毁了，后续任何对路径的操作，比如使用fill、stroke进行渲染，都不会涉及到被清除的路径。</p>
<p>closePath 这个方法，看上去似乎和 beginPath 异曲同工。其实它和 beginPath 的区别非常大，作用也不同，很容易搞混。它的作用是将当前子路径的末端点至首端点创建一条连线，此外没有任何其他作用，也并没有语义上的那种结束路径的作用。</p>
<p>fill 填充、stroke 描边：对当前 canvas 上下文中的，即未被 beginPath 清除的路径和所有子路径进行填充渲染或描边渲染</p>
<p>clip：作用是利用当前路径和所有子路径的填充区域生成裁剪区域，调用后所有的绘制操作只能在该区域中渲染出来。调用该方法不会对路径产生影响。</p>
<h3>代码案例</h3>
<h4>案例1</h4>
<pre class="language-js"><code class="language-js">c<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'black'</span>

c<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>

c<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p><img src="https://blog-1253663928.cos.ap-guangzhou.myqcloud.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-01-13%2021.45.55.png" alt="代码"></p>
<p>只有一条子路径，调用stroke方法描边</p>
<h4>案例2</h4>
<pre class="language-js"><code class="language-js">c<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'black'</span>

c<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

c<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>

c<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p><img src="https://blog-1253663928.cos.ap-guangzhou.myqcloud.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-01-13%2021.41.11.png" alt="代码"></p>
<p>创建了两条子路径，子路径间不相连，调用stroke方法能将两条子路径都描边</p>
<h4>案例3</h4>
<pre class="language-js"><code class="language-js">c<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'black'</span>

c<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
c<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>

c<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p><img src="https://blog-1253663928.cos.ap-guangzhou.myqcloud.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-01-13%2021.50.15.png" alt="代码"></p>
<p>创建一条子路径后，beginPath清除路径，lineTo调用时发现不存在任何子路径，因此新建一条子路径。调用stroke方法只影响到存在的路径。</p>
<h4>案例4</h4>
<pre class="language-js"><code class="language-js">c<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'black'</span>

c<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

c<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
c<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

c<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p><img src="https://blog-1253663928.cos.ap-guangzhou.myqcloud.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-01-13%2021.56.39.png" alt="代码"></p>
<p>closePath使得第二条子路径首尾相连，然后在20,60调用lineTo，发现路径仍然连着，调用closePath并不会结束和清除路径。</p>
<h2>绘图状态</h2>
<p>一个canvas上下文的绘图状态包含如下：</p>
<ul>
<li>变换矩阵：translate、rotate、scale、transform</li>
<li>剪切区域：clip</li>
<li>虚线列表</li>
<li>渲染属性
<ul>
<li>描边、填充样式：strokeStyle、fillStyle</li>
<li>线条设置：lineWidth、lineCap、lineJoin、miterLimit、lineDashOffset</li>
<li>阴影设置：shadowOffsetX、shadowOffsetY、shadowBlur、shadowColor</li>
<li>文本设置：font、textAlign、textBaseline、direction</li>
<li>其它：globalAlpha、globalCompositeOperation、imageSmoothingEnabled</li>
</ul>
</li>
</ul>
<p>需要注意的是，路径不属于绘图状态的一部分。</p>
<p>可以使用 save 和 restore 方法对绘图状态进行存取，canvas 内部实现了一个栈，调用 save 即把当前上下文的绘图状态对象 push 入栈，调用 restore 即是 pop 一个绘图状态对象出栈，然后将当前上下文的绘图状态替换为该绘图状态。</p>
<p>使用save/restore能很方便地进行绘图状态的局部更新，而不会影响到全局。</p>
<h4>案例</h4>
<pre class="language-js"><code class="language-js">c<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'black'</span>
c<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">2</span>
<span class="token comment">/**
 * 绘图状态1: {
 *    strokeStyle: 'black',
 *    lineWidth: 2,
 * }
 **/</span>    
c<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
c<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    
c<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//保存绘图状态1</span>

c<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'red'</span>
<span class="token comment">/**
 * 绘图状态2: {
 *    strokeStyle: 'red',
 *    lineWidth: 2,
 * }
 **/</span>  
c<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
c<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

c<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//恢复成绘图状态1</span>

c<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
c<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
c<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p><img src="https://blog-1253663928.cos.ap-guangzhou.myqcloud.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-01-13%2022.09.12.png" alt="代码"></p>
</section></div></div></div></div><script>window.__NUXT__={layout:"default",data:[{}],error:null,state:{allArticles:{},article:{name:"canvas-concept",document:'<hr>\n<h2>modified_time: 2019-01-13 22:09\ntitle: canvas的一些概念\ntype: post</h2>\n<p>canvas接触了挺久了，发现很多概念还是很模糊，比如路径、状态等等，经常搞混，因此现在总结和梳理一下。</p>\n<h2>路径</h2>\n<p>了解canvas的都知道，canvas上下文中的moveTo、lineTo、rect等方法可以创建路径，但什么是路径呢？</p>\n<p>就我理解，一条路径就是一系列点和这些点按一定顺序相连的一种抽象描述，和ps里的钢笔工具画出来的路径概念是一样的。</p>\n<p>canvas 里又有子路径的概念，每条子路径是一个单独的路径，不与其它路径相连接。一个路径中可以含有多个子路径。</p>\n<p>moveTo 的作用就是在当前路径下新建一条子路径，将指定的点作为子路径的起点</p>\n<p>lineTo 则是新建一个点，将这个点与当前的子路径相连。如果当前没有子路径，则作用与 moveTo 方法相同。</p>\n<p>注意，有些绘制路径的方法会主动新建子路径，比如 rect 方法，而有些则会像 lineTo 那样尽可能衔接已有的子路径，比如 arc 方法。</p>\n<p>至于 beginPath，这个方法的作用是在当前canvas上下文中创建一个新路径，把已存在的路径清除。路径的清除不会影响到已经使用fill、stroke等方法绘制上去的像素，只是内存中的路径抽象被销毁了，后续任何对路径的操作，比如使用fill、stroke进行渲染，都不会涉及到被清除的路径。</p>\n<p>closePath 这个方法，看上去似乎和 beginPath 异曲同工。其实它和 beginPath 的区别非常大，作用也不同，很容易搞混。它的作用是将当前子路径的末端点至首端点创建一条连线，此外没有任何其他作用，也并没有语义上的那种结束路径的作用。</p>\n<p>fill 填充、stroke 描边：对当前 canvas 上下文中的，即未被 beginPath 清除的路径和所有子路径进行填充渲染或描边渲染</p>\n<p>clip：作用是利用当前路径和所有子路径的填充区域生成裁剪区域，调用后所有的绘制操作只能在该区域中渲染出来。调用该方法不会对路径产生影响。</p>\n<h3>代码案例</h3>\n<h4>案例1</h4>\n<pre class="language-js"><code class="language-js">c<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">\'black\'</span>\n\nc<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>\n\nc<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre>\n<p><img src="https://blog-1253663928.cos.ap-guangzhou.myqcloud.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-01-13%2021.45.55.png" alt="代码"></p>\n<p>只有一条子路径，调用stroke方法描边</p>\n<h4>案例2</h4>\n<pre class="language-js"><code class="language-js">c<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">\'black\'</span>\n\nc<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>\n\nc<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>\n\nc<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre>\n<p><img src="https://blog-1253663928.cos.ap-guangzhou.myqcloud.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-01-13%2021.41.11.png" alt="代码"></p>\n<p>创建了两条子路径，子路径间不相连，调用stroke方法能将两条子路径都描边</p>\n<h4>案例3</h4>\n<pre class="language-js"><code class="language-js">c<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">\'black\'</span>\n\nc<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>\nc<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>\n\nc<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre>\n<p><img src="https://blog-1253663928.cos.ap-guangzhou.myqcloud.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-01-13%2021.50.15.png" alt="代码"></p>\n<p>创建一条子路径后，beginPath清除路径，lineTo调用时发现不存在任何子路径，因此新建一条子路径。调用stroke方法只影响到存在的路径。</p>\n<h4>案例4</h4>\n<pre class="language-js"><code class="language-js">c<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">\'black\'</span>\n\nc<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>\n\nc<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>\nc<span class="token punctuation">.</span><span class="token function">closePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nc<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre>\n<p><img src="https://blog-1253663928.cos.ap-guangzhou.myqcloud.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-01-13%2021.56.39.png" alt="代码"></p>\n<p>closePath使得第二条子路径首尾相连，然后在20,60调用lineTo，发现路径仍然连着，调用closePath并不会结束和清除路径。</p>\n<h2>绘图状态</h2>\n<p>一个canvas上下文的绘图状态包含如下：</p>\n<ul>\n<li>变换矩阵：translate、rotate、scale、transform</li>\n<li>剪切区域：clip</li>\n<li>虚线列表</li>\n<li>渲染属性\n<ul>\n<li>描边、填充样式：strokeStyle、fillStyle</li>\n<li>线条设置：lineWidth、lineCap、lineJoin、miterLimit、lineDashOffset</li>\n<li>阴影设置：shadowOffsetX、shadowOffsetY、shadowBlur、shadowColor</li>\n<li>文本设置：font、textAlign、textBaseline、direction</li>\n<li>其它：globalAlpha、globalCompositeOperation、imageSmoothingEnabled</li>\n</ul>\n</li>\n</ul>\n<p>需要注意的是，路径不属于绘图状态的一部分。</p>\n<p>可以使用 save 和 restore 方法对绘图状态进行存取，canvas 内部实现了一个栈，调用 save 即把当前上下文的绘图状态对象 push 入栈，调用 restore 即是 pop 一个绘图状态对象出栈，然后将当前上下文的绘图状态替换为该绘图状态。</p>\n<p>使用save/restore能很方便地进行绘图状态的局部更新，而不会影响到全局。</p>\n<h4>案例</h4>\n<pre class="language-js"><code class="language-js">c<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">\'black\'</span>\nc<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">2</span>\n<span class="token comment">/**\n * 绘图状态1: {\n *    strokeStyle: \'black\',\n *    lineWidth: 2,\n * }\n **/</span>    \nc<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nc<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>\nc<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    \nc<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//保存绘图状态1</span>\n\nc<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">\'red\'</span>\n<span class="token comment">/**\n * 绘图状态2: {\n *    strokeStyle: \'red\',\n *    lineWidth: 2,\n * }\n **/</span>  \nc<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nc<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>\nc<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n\nc<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//恢复成绘图状态1</span>\n\nc<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nc<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>\nc<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>\nc<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n</code></pre>\n<p><img src="https://blog-1253663928.cos.ap-guangzhou.myqcloud.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202019-01-13%2022.09.12.png" alt="代码"></p>\n'}},serverRendered:!0}</script><script src="/_nuxt/f2a175f0c9b27ce0ea03.js" defer></script><script src="/_nuxt/944a63902cd72f03102d.js" defer></script><script src="/_nuxt/b9fbefe8b023fdf63743.js" defer></script><script src="/_nuxt/7e5bc1f92898fa1790e7.js" defer></script>
  </body>
</html>
